---
import type { TeachingItem } from "../data/teaching";
import InterpolatedText from "./InterpolatedText.astro";

interface Props {
  item: TeachingItem;
  lang?: "en" | "cs";
}

const { item, lang = "en" } = Astro.props;

function getIconForLink(type: string): string {
  switch (type) {
    case "website":
      return "fas fa-globe";
    case "github":
      return "fab fa-github";
    case "youtube":
      return "fab fa-youtube";
    case "course":
      return "fa fa-link";
    case "materials":
      return "fas fa-book";
    default:
      return "fas fa-link";
  }
}
---

<div class="flex flex-col gap-4 border-b border-gray-300 py-8 last:border-0">
  <div class="flex items-start gap-4">
    <div class="h-16 w-16 flex-shrink-0">
      <img
        src={item.image}
        alt={item.title[lang]}
        class="h-full w-full rounded-lg border border-border object-contain"
      />
    </div>
    <div class="flex-grow">
      <h3 class="mb-1 text-xl font-bold text-foreground">{item.title[lang]}</h3>
      <div class="flex items-center gap-2 text-sm text-foreground/80">
        <i class="far fa-calendar-alt text-accent"></i>
        <span>{item.period[lang]}</span>
      </div>
    </div>
  </div>

  <div class="text-base leading-relaxed text-foreground/90">
    <InterpolatedText text={item.description[lang]} />
  </div>

  {
    item.links && item.links.length > 0 && (
      <div class="flex flex-wrap gap-3">
        {item.links.map(link => (
          <a
            href={link.url}
            target="_blank"
            rel="noopener noreferrer"
            class="text-accent-foreground inline-flex items-center rounded-md border border-accent/20 bg-accent/10 px-4 py-2 text-sm font-medium transition-colors hover:bg-accent/20 dark:text-accent"
          >
            <i class={`${getIconForLink(link.type)} mr-2`} />
            {link.label}
          </a>
        ))}
      </div>
    )
  }
</div>
